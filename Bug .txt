Bug
source ~/.virtualenvs/streamlit_env/bin/activate
Bug List untuk edit inventory proses scan di tab 3:
1.UID Tersimpan Meskipun Klik Batal 
     problem:    
        - Saat user buka modal tambah eksemplar → scan UID → klik "Batal"
        - UID sudah terlanjur tersimpan di rt_book_uid dan uid_buffer sudah terupdate jadi jenis='book'
     root cause:
        - Submit terjadi di button "Simpan", bukan di button "Scan"
        - Tapi sepertinya ada logic yang salah sehingga save terjadi sebelum user konfirmasi
2. Kode Eksemplar Tidak Unik / Tidak Follow Update Terakhir 
     problem:
        - Kode eksemplar yang digenerate tidak follow nomor terakhir dari buku yang sama
        - Contoh: Buku "Sistem Digital" sudah punya SIS-011, tapi scan baru malah generate SIST-0001 lagi (duplicate)
     Root Cause:
        - Query MAX() di controller tidak spesifik ke book_id tertentu
        - Prefix generation mungkin inconsistent
3.Auto redirect tab → Nice to have, improve UX saat sudah scan di tab 3 maka akan otomatis redirect ke tab 3 langsung 


UPDATE uid_buffer SET timestamp = NOW() WHERE uid = 'A3B944F2';

-- 1. Cek UID ada di uid_buffer
SELECT * FROM uid_buffer WHERE uid = 'A3B944F2';

-- 2. Cek UID sudah terlabel ke buku
SELECT 
    ub.id AS uid_buffer_id,
    ub.uid,
    ub.is_labeled,
    rt.book_id,
    rt.kode_eksemplar,
    b.judul_buku
FROM uid_buffer ub
LEFT JOIN rt_book_uid rt ON ub.id = rt.uid_buffer_id
LEFT JOIN books b ON rt.book_id = b.id
WHERE ub.uid = 'A3B944F2';

-- 3. Cek member di session (ganti dengan user_id yang sebenarnya)
SELECT id, nama, status FROM users WHERE id = 1;
